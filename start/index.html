<!DOCTYPE html>
<meta charset="UTF-8"/>
<h1>START</h1>
<button onclick="generarandom()">START</button>
<p id="pinEl"></p>
<p id="playersEl"></p>

<script>
    let pin = 0;
    function generarandom(){
        pin = Math.floor(Math.random()*9000)+1000;
        pinEl.innerText=pin;
    }

    function obtenerUsuarios(){
        fetch(`https://dungee-vercel-1.vercel.app/api/damelosusers?pin=${pin}`)
        .then(string => {console.log(string); return string.json()})
        .then(json => {
            showUsers(json);
            //playersEl.innerText = JSON.stringify(json);
        })
    };

    function showUsers(json){
        playersEl.innerText = "";
        for (const user in json.users) {
            playersEl.innerText += json.users[user].name + ", ";
        }
    }

    setInterval(obtenerUsuarios, 3000);
</SCript>
